{{!--
	Static block that creates a canvas for a 3D element to be loaded.
	It will include an if that either, loads a default APP and JSON to just display the block,
	create a partial JS that could be loaded? (That might take quite a bit of time...)
	Or do nothing and expect the user to add the app and json pieces themselves. Most likely to be used really. Not everything can be perfectly built from the template right away.
--}}
<section id="tob3d__threedee__number" class="{{classConcat name classNames='main'}}">

	{{!-- Add wrapper and title --}}
	<div id="tob3d__threedee__canvas" class="{{classConcat name classNames='canvas'}}">
		<div id="tob3d__threedee__gizmo" class="{{classConcat name classNames='gizmo__orbit'}}"></div>
	</div>

	{{!-- Add link to post a the bottom. (Backend of this will take more time.) --}}

	<div class="tob3d__explaination">
		<h2>
			{{selectContent models 0 'explainationTitle'}}
		</h2>

		<p>
			{{selectContent models 0 'explainationBody'}}
		</p>

		{{#> blocks/block-postpreview-onpage }}
		{{/blocks/block-postpreview-onpage}}
	</div>
</section>

{{!-- Load in place.
	<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.module.min.js"></script>
	Pretty sure the module one is preferred at this point.
--}}

{{!-- Create for later. --}}
<script type="module">
	import * as THREE 			from './assets/js/tob3d-three-three.module.js';
	import { APP }				from './assets/js/tob3d-three-app.js';
	import { VRButton }			from './assets/js/tob3d-three-VRButton.js';

	window.THREE = THREE; // Used by APP Scripts.
	window.VRButton = VRButton; // Used by APP Scripts.

	const loader = new THREE.FileLoader();
	loader.load( './tob3d-three-app.json', function ( text ) {

		const $threedeeContainer = document.getElementById('tob3d__threedee__canvas')

		console.log($threedeeContainer.innerWidth)

		const player = new APP.Player();
		player.load( JSON.parse( text ) );
		player.setSize( $threedeeContainer.offsetWidth, $threedeeContainer.offsetHeight )
		player.play();

		document.getElementById('tob3d__threedee__number').appendChild( player.dom )

		window.addEventListener( 'resize', function () {

			player.setSize( $threedeeContainer.offsetWidth, $threedeeContainer.offsetHeight )

		} );

	} );
</script>